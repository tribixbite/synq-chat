import{j as e,M as Z,y as j,F as ee,u as U,r as c,P as te,c as f,a as re,R as se,G as ne,b as oe,T as ae,d as le,e as ie,f as ce,g as de,h as ue,L as me}from"./vendor-C0DytrLY.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(r){if(r.ep)return;r.ep=!0;const t=a(r);fetch(r.href,t)}})();var G=(o=>(o.Production="production",o.Development="development",o))(G||{});G.Production;const pe=o=>{const n=document.getElementById(o);if(!n)throw new Error(`Element with id '${o}' not found`);return n},xe="/apps/vibesynq/assets/logo-BORBw2Fg.svg";function he({onReset:o,children:n}){return e.jsxs("header",{className:"border-b border-gray-900 bg-gray-950 px-3 lg:px-6 py-2 flex justify-between items-center sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center justify-start gap-3",children:[e.jsxs("h1",{className:"text-white text-lg lg:text-xl font-bold flex items-center justify-start",children:[e.jsx("img",{src:xe,alt:"Vibesynq Logo",className:"size-6 lg:size-8 mr-2"}),"Vibesynq"]}),e.jsx("p",{className:"text-gray-700 max-md:hidden",children:"|"}),e.jsxs("button",{type:"button",className:"max-md:hidden relative cursor-pointer flex-none flex items-center justify-center rounded-md text-xs font-semibold leading-4 py-1.5 px-3 hover:bg-gray-700 text-gray-100 shadow-sm dark:shadow-highlight/20 bg-gray-800",onClick:o,children:[e.jsx(Z,{className:"mr-1 text-base"}),"New"]})]}),n]})}function fe({html:o}){return e.jsx("div",{className:"flex items-center justify-end gap-5",children:e.jsx("div",{className:"relative flex items-center justify-end",children:e.jsx("button",{type:"button",className:"relative flex-none flex items-center justify-center rounded-md bg-blue-500 text-xs lg:text-sm font-semibold leading-5 lg:leading-6 py-1.5 px-5 hover:bg-blue-600 text-white shadow-sm dark:shadow-highlight/20 mr-2",onClick:()=>{const n=new Blob([o],{type:"text/html"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download="exported-space.html",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),j.success("HTML exported successfully!")},children:"Export"})})})}const E=`<!DOCTYPE html>
<html>
  <head>
    <title>My app</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8">
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        height: 100dvh;
        font-family: "Comic Sans MS", cursive, sans-serif;
        text-align: center;
        background: linear-gradient(-45deg, #e73c7e,rgb(9, 62, 82), #23d5ab);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
      }
      @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .arrow {
        position: absolute;
        bottom: 32px;
        right: 32px;
        width: 100px;
        transform: rotate(-30deg);
        filter: drop-shadow(0 0 10px #fff);
      }
      h1 {
        font-size: 3rem;
        color: white;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      }
      h1 span {
        color: #f0f0f0;
        font-size: 1.5rem;
        display: block;
        margin-bottom: 1rem;
      }
    </style>
  </head>
  <body>
    <h1>
      <span>I'm so ready to slay this,</span>
      Ask me anything <br />
    </h1>
  </body>
</html>
`,ge="/apps/vibesynq/assets/logo-BORBw2Fg.svg";function be({children:o}){return e.jsxs("div",{className:"border-b border-gray-800 pl-4 lg:pl-7 pr-3 flex items-center justify-between",children:[e.jsx("div",{className:`
      space-x-6`,children:e.jsxs("button",{type:"button",className:"rounded-md text-sm cursor-pointer transition-all duration-100 font-medium relative py-2.5 text-white",children:["index.html",e.jsx("span",{className:"absolute bottom-0 left-0 h-0.5 w-full transition-all duration-100 bg-white"})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsxs("a",{href:"https://github.com/Multisynq/vibesynq",target:"_blank",rel:"noopener noreferrer",className:"text-[12px] text-gray-300 hover:brightness-120 flex items-center gap-1 font-code",children:[e.jsx("img",{src:ge,alt:"Multisynq logo",className:"size-5"})," Multisynq"]}),e.jsx("span",{className:"text-[12px] text-gray-300 flex items-center gap-1 font-code",children:"enhanced by"}),e.jsxs("a",{href:"https://github.com/tribixbite",target:"_blank",rel:"noopener noreferrer",className:"text-[12px] text-gray-300 hover:brightness-120 flex items-center gap-1 font-code",children:[e.jsx(ee,{})," tribixbite"]}),o]})]})}function ye({html:o,children:n}){const[,a]=U("html_content"),i=async()=>{o!==E&&a(o);const t=await(await fetch("/api/login")).json();t!=null&&t.redirectUrl&&window.open(t.redirectUrl,"_blank")};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex items-center text-sm px-4 py-2 border-b border-gray-200 gap-2 bg-gray-100 font-semibold text-gray-700",children:[e.jsx("span",{className:"text-xs bg-red-500/10 text-red-500 rounded-full pl-1.5 pr-2.5 py-0.5 flex items-center justify-start gap-1.5",children:"REQUIRED"}),"Login with Hugging Face"]}),e.jsxs("main",{className:"px-4 py-4 space-y-3",children:[n,e.jsx("button",{type:"button",onClick:i,children:e.jsx("img",{src:"https://huggingface.co/datasets/huggingface/badges/resolve/main/sign-in-with-huggingface-lg-dark.svg",alt:"Sign in with Hugging Face",className:"mx-auto"})})]})]})}const ve="/apps/vibesynq/assets/success-rK_Ordu6.mp3",T={local:{name:"Local",max_tokens:131e3,id:"local"},openrouter:{name:"Open Router",max_tokens:999999,id:"openrouter"}};function we({open:o,onClose:n,provider:a,error:i,onChange:r,localSettings:t,setLocalSettings:u}){const m=c.useCallback(()=>{localStorage.setItem("localSettings",JSON.stringify(t))},[t]);return c.useEffect(()=>{m()},[m]),e.jsxs("div",{className:"",children:[e.jsx("button",{type:"button",className:"relative overflow-hidden cursor-pointer flex-none flex items-center justify-center rounded-full text-base font-semibold size-8 text-center bg-gray-800 hover:bg-gray-700 text-gray-100 shadow-sm dark:shadow-highlight/20",onClick:()=>{n(s=>!s)},children:e.jsx(te,{})}),e.jsx("div",{className:f("h-screen w-screen bg-black/20 fixed left-0 top-0 z-40",{"opacity-0 pointer-events-none":!o}),onClick:()=>n(!1),role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&n(!1)}}),e.jsxs("div",{className:f("absolute top-0 -translate-y-[calc(100%+16px)] right-0 z-40 w-96 bg-white border border-gray-200 rounded-lg shadow-lg transition-all duration-75 overflow-hidden",{"opacity-0 pointer-events-none":!o}),children:[e.jsxs("header",{className:"flex items-center text-sm px-4 py-2 border-b border-gray-200 gap-2 bg-gray-100 font-semibold text-gray-700",children:[e.jsx("span",{className:"text-xs bg-blue-500/10 text-blue-500 rounded-full pl-1.5 pr-2.5 py-0.5 flex items-center justify-start gap-1.5",children:"Provider"}),"Customize Settings"]}),e.jsxs("main",{className:"px-4 pt-3 pb-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium flex items-center justify-between",children:"Use auto-provider"}),e.jsx("div",{className:f("bg-gray-200 rounded-full w-10 h-6 flex items-center justify-between p-1 cursor-pointer transition-all duration-200",{"!bg-blue-500":a==="auto"}),onClick:()=>{r(a==="auto"?"fireworks-ai":"auto")},role:"switch","aria-checked":a==="auto",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&r(a==="auto"?"fireworks-ai":"auto")},children:e.jsx("div",{className:f("w-4 h-4 rounded-full shadow-md transition-all duration-200 bg-white",{"translate-x-4":a==="auto"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"We'll automatically select the best provider for you based on your prompt."})]}),i!==""&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-2 flex items-center justify-between bg-red-500/10 p-2 rounded-md",children:i}),e.jsxs("div",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-2 flex items-center justify-between",children:"Inference Provider"}),e.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.keys(T).map(s=>e.jsxs("button",{type:"button",className:f("text-gray-600 text-sm font-medium cursor-pointer border p-2 rounded-md flex items-center justify-start gap-2 text-left",{"bg-blue-500/10 border-blue-500/15 text-blue-500":s===a,"hover:bg-gray-100 border-gray-100":s!==a}),onClick:()=>{r(s)},children:[e.jsx("img",{src:`/apps/vibesynq/providers/${s}.svg`,alt:T[s].name,className:"size-5"}),T[s].name]},s))}),e.jsx("hr",{className:"text-gray-800 text-sm font-medium mb-2"})]}),a==="local"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-2",children:"Make sure to run the local server first"}),e.jsx("hr",{className:"text-gray-800 text-sm font-medium mb-2"}),e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:t.apiKey,onChange:s=>{u({...t,apiKey:s.target.value})},className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"API URL"}),e.jsx("input",{type:"text",value:t.apiUrl||"http://localhost:11434/v1",onChange:s=>{u({...t,apiUrl:s.target.value})},className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"Model"}),e.jsx("input",{type:"text",value:t.model||"gemma3:1b",onChange:s=>{u({...t,model:s.target.value})},className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a==="openrouter"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-800 text-sm font-medium mb-2",children:["Get your OpenRouter API key from",e.jsx("a",{href:`https://openrouter.ai/
                  `,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"here"})]}),e.jsx("hr",{className:"text-gray-800 text-sm font-medium mb-2"}),e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"API Key"}),e.jsx("input",{type:"text",value:t.openRouterApiKey,onChange:s=>{u({...t,openRouterApiKey:s.target.value})},className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"Base URL"}),e.jsx("input",{type:"text",value:t.openRouterApiUrl||"https://openrouter.ai/api/v1",onChange:s=>{u({...t,openRouterApiUrl:s.target.value})},className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"Model"}),e.jsx("input",{type:"text",value:t.openRouterModel||"deepseek/deepseek-chat-v3-0324:free",onChange:s=>{u({...t,openRouterModel:s.target.value})},className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]})}function je({open:o,html:n,onClose:a}){const[,i]=U("html_content"),r=()=>{n!==E&&i(n)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:f("h-screen w-screen bg-black/20 fixed left-0 top-0 z-40",{"opacity-0 pointer-events-none":!o}),onClick:()=>a(!1),role:"button",tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&a(!1)}}),e.jsxs("div",{className:f("absolute top-0 -translate-y-[calc(100%+16px)] right-0 z-40 w-96 bg-white border border-gray-200 rounded-lg shadow-lg transition-all duration-75 overflow-hidden",{"opacity-0 pointer-events-none":!o}),children:[e.jsxs("header",{className:"flex items-center text-sm px-4 py-2 border-b border-gray-200 gap-2 bg-gray-100 font-semibold text-gray-700",children:[e.jsx("span",{className:"bg-linear-to-br shadow-green-500/10 dark:shadow-green-500/20 inline-block -skew-x-12 border border-gray-200 from-pink-300 via-green-200 to-yellow-200 text-xs font-bold text-black shadow-lg dark:from-pink-500 dark:via-green-500 dark:to-yellow-500 dark:text-black rounded-lg px-2.5 py-0.5 ",children:"PRO"}),"Your free inference quota is exhausted"]}),e.jsxs("main",{className:"px-4 pt-3 pb-4",children:[e.jsx("p",{className:"text-gray-950 text-sm font-semibold flex items-center justify-between",children:"Upgrade to a PRO account to activate Inference Providers and continue using Vibesynq."}),e.jsx("p",{className:"text-sm text-pretty text-gray-500 mt-2",children:"It also unlocks thousands of Space apps powered by ZeroGPU for 3d, audio, music, video and more!"}),e.jsx("a",{href:"https://huggingface.co/subscribe/pro",target:"_blank",rel:"noreferrer",className:"mt-4 bg-black text-white cursor-pointer rounded-full py-2 px-3 text-sm font-medium w-full block text-center hover:bg-gray-800 transition duration-200 ease-in-out",onClick:r,children:"Subscribe to PRO ($9/month)"})]})]})]})}const M={apiKey:"",apiUrl:"http://localhost:11434/v1",model:"gemma3:1b",openRouterApiKey:"<OPENROUTER_API_KEY>",openRouterApiUrl:"https://openrouter.ai/api/v1",openRouterModel:"deepseek/deepseek-chat-v3-0324:free"};function Ne({html:o,defaultHTML:n,setHtml:a,onScrollToBottom:i,isAiWorking:r,setisAiWorking:t,setView:u,onNewPrompt:m}){const[s,y]=c.useState(!1),[v,b]=c.useState(""),[D,K]=c.useState(!1),[A,q]=c.useState(""),[w,O]=U("provider","auto"),[I,C]=c.useState(!1),[l,d]=c.useState(""),[p,N]=c.useState(!1),[g,k]=c.useState(()=>{const x=localStorage.getItem("localSettings");try{return x?{...M,...JSON.parse(x)}:M}catch{return M}}),z=c.useCallback(()=>{const x=localStorage.getItem("localSettings");if(x)try{const S=JSON.parse(x);k({...M,...S})}catch(S){console.error("Failed to parse localSettings from localStorage",S),k(M)}else k(M)},[]);c.useEffect(()=>{z()},[z]);const $=new Audio(ve);$.volume=.5;const F=async()=>{if(r||!v.trim())return;t(!0),d("");let x="",S=0;try{m(v);const h={prompt:v,provider:w};o!==n&&(h.html=o),A&&(h.previousPrompt=A),w==="local"?(h.ApiKey=g.apiKey,h.ApiUrl=g.apiUrl,h.Model=g.model):w==="openrouter"&&(h.ApiKey=g.openRouterApiKey,h.ApiUrl=g.openRouterApiUrl,h.Model=g.openRouterModel);const L=await fetch("/api/ask-ai",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}});if(L!=null&&L.body){if(!L.ok){const P=await L.json();P.openLogin?y(!0):P.openSelectProvider?(C(!0),d(P.message)):P.openProModal?N(!0):j.error(P.message),t(!1);return}const Y=L.body.getReader(),J=new TextDecoder("utf-8"),_=async()=>{var W,V;const{done:P,value:Q}=await Y.read();if(P){j.success("AI responded successfully"),b(""),q(v),t(!1),K(!0),u("preview");const R=(W=x.match(/<!DOCTYPE html>[\s\S]*<\/html>/))==null?void 0:W[0];R&&a(R);return}const X=J.decode(Q,{stream:!0});x+=X;const B=(V=x.match(/<!DOCTYPE html>[\s\S]*/))==null?void 0:V[0];if(B){let R=B;R.includes("</html>")||(R+=`
</html>`);const H=Date.now();H-S>300&&(a(R),S=H),R.length>200&&i()}_()};_()}}catch(h){t(!1),j.error(h.message),h.openLogin&&y(!0)}};return e.jsxs("div",{className:`bg-gray-950 rounded-xl py-2 lg:py-2.5 pl-3.5 lg:pl-4 pr-2 lg:pr-2.5 absolute lg:sticky bottom-3 left-3 lg:bottom-4 lg:left-4 w-[calc(100%-1.5rem)] lg:w-[calc(100%-2rem)] z-10 group ${r?"animate-pulse":""}`,children:[n!==o&&e.jsxs("button",{type:"button",className:"bg-white lg:hidden -translate-y-[calc(100%+8px)] absolute left-0 top-0 shadow-md text-gray-950 text-xs font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-100 hover:brightness-150 transition-all duration-100 cursor-pointer",onClick:()=>u("preview"),children:[e.jsx(re,{className:"text-sm"}),"View Preview"]}),e.jsxs("div",{className:"w-full relative flex items-center justify-between",children:[e.jsx(se,{className:"text-lg lg:text-xl text-gray-500 group-focus-within:text-pink-500"}),e.jsx("input",{type:"text",disabled:r,className:"w-full bg-transparent max-lg:text-sm outline-none px-3 text-white placeholder:text-gray-500 font-code",placeholder:D?"What do you want to ask AI next?":"Ask AI anything...",value:v,onChange:x=>b(x.target.value),onKeyDown:x=>{x.key==="Enter"&&F()}}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(we,{provider:w,onChange:O,open:I,error:l,onClose:C,setLocalSettings:k,localSettings:g}),e.jsx("button",{type:"button",disabled:r,className:"relative overflow-hidden cursor-pointer flex-none flex items-center justify-center rounded-full text-sm font-semibold size-8 text-center bg-pink-500 hover:bg-pink-400 text-white shadow-sm dark:shadow-highlight/20 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed disabled:hover:bg-gray-300",onClick:F,children:e.jsx(ne,{className:"-translate-x-[1px]"})})]})]}),e.jsx("button",{type:"button","aria-label":"Close modal",className:f("h-screen w-screen bg-black/20 fixed left-0 top-0 z-10",{"opacity-0 pointer-events-none":!s,"cursor-default":!s}),onClick:()=>y(!1),disabled:!s}),e.jsx("div",{className:f("absolute top-0 -translate-y-[calc(100%+8px)] right-0 z-10 w-80 bg-white border border-gray-200 rounded-lg shadow-lg transition-all duration-75 overflow-hidden",{"opacity-0 pointer-events-none":!s}),children:e.jsx(ye,{html:o,children:e.jsx("p",{className:"text-gray-500 text-sm mb-3",children:"You reached the limit of free AI usage. Please login to continue."})})}),e.jsx(je,{html:o,open:p,onClose:()=>N(!1)})]})}function ke({html:o,isResizing:n,isAiWorking:a,setView:i,ref:r}){const t=c.useRef(null),u=()=>{if(t.current){const m=t.current,s=m.srcdoc;m.srcdoc="",setTimeout(()=>{m.srcdoc=s},10)}};return e.jsxs("button",{ref:r,type:"button",className:"w-full border-l border-gray-900 bg-white h-[calc(100dvh-49px)] lg:h-[calc(100dvh-53px)] relative text-left align-top",onClick:m=>{a&&(m.preventDefault(),m.stopPropagation(),j.warn("Please wait for the AI to finish working."))},children:[e.jsx("iframe",{ref:t,title:"output",className:f("w-full h-full select-none",{"pointer-events-none":n||a}),srcDoc:o}),e.jsxs("div",{className:"flex items-center justify-start gap-3 absolute bottom-3 lg:bottom-5 max-lg:left-3 lg:right-5",children:[e.jsxs("button",{type:"button",className:"lg:hidden bg-gray-950 shadow-md text-white text-xs lg:text-sm font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-900 hover:brightness-150 transition-all duration-100 cursor-pointer",onClick:()=>i("editor"),children:[e.jsx(oe,{className:"text-sm"}),"Hide preview"]}),o===E&&e.jsxs("a",{href:"https://github.com/Multisynq/vibesynq",target:"_blank",rel:"noreferrer",className:"bg-gray-200 text-gray-950 text-xs lg:text-sm font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-200 hover:bg-gray-300 transition-all duration-100 cursor-pointer",children:["â­ ",e.jsx("span",{children:"Give a Star on GitHub"})]}),!a&&e.jsxs("button",{type:"button",className:"bg-white lg:bg-gray-950 shadow-md text-gray-950 lg:text-white text-xs lg:text-sm font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-100 lg:border-gray-900 hover:brightness-150 transition-all duration-100 cursor-pointer",onClick:u,children:[e.jsx(ae,{className:"text-sm"}),"Refresh Preview"]})]})]})}function Pe(){const[o,,n]=U("html_content"),a=c.useRef(null),i=c.useRef(null),r=c.useRef(null),t=c.useRef(null),[u,m]=c.useState(!1),[,s]=c.useState(!1),[y,v]=c.useState(o??E),[b,D]=c.useState(!1),[K,A]=c.useState("editor"),[,q]=c.useState([]),w=()=>{var l;if(!(!i.current||!a.current))if(window.innerWidth>=1024){const d=((l=r.current)==null?void 0:l.offsetWidth)??8,p=window.innerWidth-d,N=p/3,g=p-N;i.current.style.width=`${N}px`,a.current.style.width=`${g}px`}else i.current.style.width="",a.current.style.width=""},O=l=>{if(!i.current||!a.current||!r.current)return;const d=r.current.offsetWidth,p=100,N=window.innerWidth-d-p,g=l.clientX,k=Math.max(p,Math.min(g,N)),z=window.innerWidth-k-d;i.current.style.width=`${k}px`,a.current.style.width=`${z}px`},I=()=>{m(!0),document.addEventListener("mousemove",O),document.addEventListener("mouseup",C)},C=()=>{m(!1),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",C)};return le("beforeunload",l=>{if(b||y!==E)return l.preventDefault(),""}),ie(()=>{o&&(n(),j.warn("Previous HTML content restored from local storage.")),w(),r.current&&(r.current.addEventListener("mousedown",I),window.addEventListener("resize",w))}),ce(()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",C),r.current&&r.current.removeEventListener("mousedown",I),window.removeEventListener("resize",w)}),e.jsxs("div",{className:"h-screen bg-gray-950 font-sans overflow-hidden",children:[e.jsx(he,{onReset:()=>{var l,d,p;if(b){j.warn("Please wait for the AI to finish working.");return}window.confirm("You're about to reset the editor. Are you sure?")&&(v(E),s(!1),n(),(p=t.current)==null||p.revealLine(((d=(l=t.current)==null?void 0:l.getModel())==null?void 0:d.getLineCount())??0))},children:e.jsx(fe,{html:y})}),e.jsxs("main",{className:"max-lg:flex-col flex w-full",children:[e.jsxs("div",{ref:i,className:f("w-full h-[calc(100dvh-49px)] lg:h-[calc(100dvh-54px)] relative overflow-hidden max-lg:transition-all max-lg:duration-200 select-none",{"max-lg:h-0":K==="preview"}),children:[e.jsx(be,{}),e.jsx("fieldset",{onClick:l=>{var d;b?(l.preventDefault(),l.stopPropagation(),j.warn("Please wait for the AI to finish working.")):(d=t.current)==null||d.focus()},onKeyDown:l=>{var d;(l.key==="Enter"||l.key===" ")&&(b||(d=t.current)==null||d.focus())},children:e.jsx(de,{language:"html",theme:"vs-dark",className:f("h-[calc(100dvh-90px)] lg:h-[calc(100dvh-96px)]",{"pointer-events-none":b}),value:y,onValidate:l=>{(l==null?void 0:l.length)>0&&s(!0)},onChange:l=>{v(l??""),s(!1)},onMount:l=>{t.current=l}})}),e.jsx(Ne,{html:y,defaultHTML:E,setHtml:v,isAiWorking:b,setisAiWorking:D,setView:A,onNewPrompt:l=>{q(d=>[...d,l])},onScrollToBottom:()=>{var l,d,p;(p=t.current)==null||p.revealLine(((d=(l=t.current)==null?void 0:l.getModel())==null?void 0:d.getLineCount())??0)}})]}),e.jsx("div",{ref:r,className:"bg-gray-700 hover:bg-blue-500 w-2 cursor-col-resize h-[calc(100dvh-53px)] max-lg:hidden"}),e.jsx(ke,{html:y,isResizing:u,isAiWorking:b,ref:a,setView:A})]})]})}class Re extends c.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,a){console.error("Uncaught error:",n,a)}render(){var n;return this.state.hasError?e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h1",{children:"Something went wrong."}),e.jsx("p",{children:(n=this.state.error)==null?void 0:n.toString()}),e.jsx("button",{type:"button",onClick:()=>this.setState({hasError:!1,error:void 0}),children:"Try again"})]}):this.props.children}}const Ee=pe("root"),Ce=e.jsx(c.StrictMode,{children:e.jsxs(Re,{children:[e.jsx(Pe,{}),e.jsx(me,{className:"pt-11 max-md:p-4"})]})});ue.createRoot(Ee).render(Ce);
