import{j as e,M as le,y as N,F as ue,u as F,r as d,P as ce,c as b,a as pe,R as de,G as me,b as ge,T as he,d as xe,e as fe,f as be,g as ye,h as ke,L as we}from"./vendor-BRxEbt8r.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))m(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&m(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function m(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();const ve={HOST:"http://localhost"};var $=(o=>(o.Production="production",o.Development="development",o))($||{});const H={BASE_URL:"/apps/vibesynq",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var je={NODE_ENV:'"production"',MODE:'"production"'};const Te=typeof process<"u",te=typeof window<"u";function G(o){if(Te)return je[o];if(te&&typeof import.meta<"u"&&H)return H[`VITE_${o}`]||H[o]}G("PORT");G("HOST")??ve.HOST;const Ne=G("NODE_ENV");Ne===$.Production||te&&$.Production;G("DEFAULT_APP");G("APPS_DIR");const Ae=o=>{const i=document.getElementById(o);if(!i)throw new Error(`Element with id '${o}' not found`);return i},Pe="/apps/vibesynq/assets/logo-BORBw2Fg.svg";function Se({onReset:o,children:i}){return e.jsxs("header",{className:"border-b border-gray-900 bg-gray-950 px-3 lg:px-6 py-2 flex justify-between items-center sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center justify-start gap-3",children:[e.jsxs("h1",{className:"text-white text-lg lg:text-xl font-bold flex items-center justify-start",children:[e.jsx("img",{src:Pe,alt:"Vibesynq Logo",className:"size-6 lg:size-8 mr-2"}),"Vibesynq"]}),e.jsx("p",{className:"text-gray-700 max-md:hidden",children:"|"}),e.jsxs("button",{type:"button",className:"max-md:hidden relative cursor-pointer flex-none flex items-center justify-center rounded-md text-xs font-semibold leading-4 py-1.5 px-3 hover:bg-gray-700 text-gray-100 shadow-sm dark:shadow-highlight/20 bg-gray-800",onClick:o,children:[e.jsx(le,{className:"mr-1 text-base"}),"New"]})]}),i]})}function Me({html:o}){return e.jsx("div",{className:"flex items-center justify-end gap-5",children:e.jsx("div",{className:"relative flex items-center justify-end",children:e.jsx("button",{type:"button",className:"relative flex-none flex items-center justify-center rounded-md bg-blue-500 text-xs lg:text-sm font-semibold leading-5 lg:leading-6 py-1.5 px-5 hover:bg-blue-600 text-white shadow-sm dark:shadow-highlight/20 mr-2",onClick:()=>{const i=new Blob([o],{type:"text/html"}),n=URL.createObjectURL(i),m=document.createElement("a");m.href=n,m.download="exported-space.html",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(n),N.success("HTML exported successfully!")},children:"Export"})})})}const R=`<!DOCTYPE html>
<html>
  <head>
    <title>My app</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8">
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        height: 100dvh;
        font-family: "Comic Sans MS", cursive, sans-serif;
        text-align: center;
        background: linear-gradient(-45deg, #e73c7e,rgb(9, 62, 82), #23d5ab);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
      }
      @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .arrow {
        position: absolute;
        bottom: 32px;
        right: 32px;
        width: 100px;
        transform: rotate(-30deg);
        filter: drop-shadow(0 0 10px #fff);
      }
      h1 {
        font-size: 3rem;
        color: white;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      }
      h1 span {
        color: #f0f0f0;
        font-size: 1.5rem;
        display: block;
        margin-bottom: 1rem;
      }
    </style>
  </head>
  <body>
    <h1>
      <span>I'm so ready to slay this,</span>
      Ask me anything <br />
    </h1>
  </body>
</html>
`,Le="/apps/vibesynq/assets/logo-BORBw2Fg.svg";function qe({children:o}){return e.jsxs("div",{className:"border-b border-gray-800 pl-4 lg:pl-7 pr-3 flex items-center justify-between",children:[e.jsx("div",{className:`
      space-x-6`,children:e.jsxs("button",{type:"button",className:"rounded-md text-sm cursor-pointer transition-all duration-100 font-medium relative py-2.5 text-white",children:["index.html",e.jsx("span",{className:"absolute bottom-0 left-0 h-0.5 w-full transition-all duration-100 bg-white"})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsxs("a",{href:"https://github.com/Multisynq/vibesynq",target:"_blank",rel:"noopener noreferrer",className:"text-[12px] text-gray-300 hover:brightness-120 flex items-center gap-1 font-code",children:[e.jsx("img",{src:Le,alt:"Multisynq logo",className:"size-5"})," Multisynq"]}),e.jsx("span",{className:"text-[12px] text-gray-300 flex items-center gap-1 font-code",children:"enhanced by"}),e.jsxs("a",{href:"https://github.com/tribixbite",target:"_blank",rel:"noopener noreferrer",className:"text-[12px] text-gray-300 hover:brightness-120 flex items-center gap-1 font-code",children:[e.jsx(ue,{})," tribixbite"]}),o]})]})}function Ee({html:o,children:i}){const[,n]=F("html_content"),m=async()=>{o!==R&&n(o);const r=await(await fetch("/api/login")).json();r!=null&&r.redirectUrl&&window.open(r.redirectUrl,"_blank")};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex items-center text-sm px-4 py-2 border-b border-gray-200 gap-2 bg-gray-100 font-semibold text-gray-700",children:[e.jsx("span",{className:"text-xs bg-red-500/10 text-red-500 rounded-full pl-1.5 pr-2.5 py-0.5 flex items-center justify-start gap-1.5",children:"REQUIRED"}),"Login with Hugging Face"]}),e.jsxs("main",{className:"px-4 py-4 space-y-3",children:[i,e.jsx("button",{type:"button",onClick:m,children:e.jsx("img",{src:"https://huggingface.co/datasets/huggingface/badges/resolve/main/sign-in-with-huggingface-lg-dark.svg",alt:"Sign in with Hugging Face",className:"mx-auto"})})]})]})}const Re="/apps/vibesynq/assets/success-rK_Ordu6.mp3",W={test:{id:"test",name:"Test Provider",description:"Mock provider for testing",apiUrl:"http://localhost:3000/test",requiresApiKey:!1,maxTokens:4096,supportsStreaming:!0,supportsVision:!1,supportsAudio:!1,models:[{id:"test-model",name:"Test Model",description:"Mock model for testing",contextLength:4096,supportsStreaming:!0,pricing:{inputTokens:0,outputTokens:0}}],pricing:{inputTokens:0,outputTokens:0,currency:"USD"},rateLimit:{requestsPerMinute:1e3,tokensPerMinute:1e6}},openrouter:{id:"openrouter",name:"OpenRouter",description:"Access to multiple AI models through a single API",apiUrl:"https://openrouter.ai/api/v1",requiresApiKey:!0,maxTokens:2e5,supportsStreaming:!0,supportsVision:!0,supportsAudio:!1,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"deepseek/deepseek-r1",name:"DeepSeek R1",description:"Latest reasoning model from DeepSeek",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.14,outputTokens:.28}},{id:"deepseek/deepseek-chat",name:"DeepSeek Chat",description:"Fast and efficient chat model",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.14,outputTokens:.28}},{id:"anthropic/claude-3.5-sonnet",name:"Claude 3.5 Sonnet",description:"Anthropic's most capable model",contextLength:2e5,supportsVision:!0,supportsStreaming:!0,pricing:{inputTokens:3,outputTokens:15}},{id:"openai/gpt-4o",name:"GPT-4o",description:"OpenAI's multimodal flagship model",contextLength:128e3,supportsVision:!0,supportsAudio:!0,supportsStreaming:!0,pricing:{inputTokens:2.5,outputTokens:10}},{id:"google/gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Google's fast multimodal model",contextLength:1048576,supportsVision:!0,supportsAudio:!0,supportsStreaming:!0,pricing:{inputTokens:.075,outputTokens:.3}},{id:"meta-llama/llama-3.3-70b-instruct",name:"Llama 3.3 70B",description:"Meta's latest open-source model",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.59,outputTokens:.79}}],pricing:{inputTokens:0,outputTokens:0,currency:"USD"},rateLimit:{requestsPerMinute:200,tokensPerMinute:1e6}},anthropic:{id:"anthropic",name:"Anthropic",description:"Claude AI models by Anthropic",apiUrl:"https://api.anthropic.com/v1",requiresApiKey:!0,maxTokens:2e5,supportsStreaming:!0,supportsVision:!0,supportsAudio:!1,authHeader:"x-api-key: {apiKey}",headers:{"anthropic-version":"2023-06-01"},models:[{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Most capable model for complex tasks",contextLength:2e5,supportsVision:!0,supportsStreaming:!0,pricing:{inputTokens:3,outputTokens:15}},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku",description:"Fast and cost-effective model",contextLength:2e5,supportsVision:!0,supportsStreaming:!0,pricing:{inputTokens:.8,outputTokens:4}},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most powerful model for complex reasoning",contextLength:2e5,supportsVision:!0,supportsStreaming:!0,pricing:{inputTokens:15,outputTokens:75}}],pricing:{inputTokens:3,outputTokens:15,currency:"USD"},rateLimit:{requestsPerMinute:1e3,tokensPerMinute:4e5}},openai:{id:"openai",name:"OpenAI",description:"GPT models by OpenAI",apiUrl:"https://api.openai.com/v1",requiresApiKey:!0,maxTokens:128e3,supportsStreaming:!0,supportsVision:!0,supportsAudio:!0,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"gpt-4o",name:"GPT-4o",description:"Flagship multimodal model",contextLength:128e3,supportsVision:!0,supportsAudio:!0,supportsStreaming:!0,pricing:{inputTokens:2.5,outputTokens:10}},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Affordable and intelligent small model",contextLength:128e3,supportsVision:!0,supportsStreaming:!0,pricing:{inputTokens:.15,outputTokens:.6}},{id:"o1",name:"o1",description:"Reasoning model for complex problems",contextLength:2e5,supportsStreaming:!1,pricing:{inputTokens:15,outputTokens:60}},{id:"o1-mini",name:"o1-mini",description:"Faster reasoning model",contextLength:128e3,supportsStreaming:!1,pricing:{inputTokens:3,outputTokens:12}}],pricing:{inputTokens:2.5,outputTokens:10,currency:"USD"},rateLimit:{requestsPerMinute:500,tokensPerMinute:8e5}},google:{id:"google",name:"Google AI",description:"Gemini models by Google",apiUrl:"https://generativelanguage.googleapis.com/v1beta",requiresApiKey:!0,maxTokens:1048576,supportsStreaming:!0,supportsVision:!0,supportsAudio:!0,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Fast multimodal model with 1M context",contextLength:1048576,supportsVision:!0,supportsAudio:!0,supportsStreaming:!0,pricing:{inputTokens:.075,outputTokens:.3}},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",description:"Advanced reasoning with long context",contextLength:2097152,supportsVision:!0,supportsAudio:!0,supportsStreaming:!0,pricing:{inputTokens:1.25,outputTokens:5}},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",description:"Fast and versatile model",contextLength:1048576,supportsVision:!0,supportsAudio:!0,supportsStreaming:!0,pricing:{inputTokens:.075,outputTokens:.3}}],pricing:{inputTokens:.075,outputTokens:.3,currency:"USD"},rateLimit:{requestsPerMinute:1500,tokensPerMinute:1e6}},xai:{id:"xai",name:"xAI",description:"Grok models by xAI",apiUrl:"https://api.x.ai/v1",requiresApiKey:!0,maxTokens:131072,supportsStreaming:!0,supportsVision:!1,supportsAudio:!1,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"grok-beta",name:"Grok Beta",description:"xAI's conversational AI with real-time data",contextLength:131072,supportsStreaming:!0,pricing:{inputTokens:5,outputTokens:15}},{id:"grok-vision-beta",name:"Grok Vision Beta",description:"Grok with vision capabilities",contextLength:131072,supportsVision:!0,supportsStreaming:!0,pricing:{inputTokens:5,outputTokens:15}}],pricing:{inputTokens:5,outputTokens:15,currency:"USD"},rateLimit:{requestsPerMinute:60,tokensPerMinute:3e5}},chutes:{id:"chutes",name:"Chutes.ai",description:"Decentralized AI compute platform",apiUrl:"https://api.chutes.ai/v1",requiresApiKey:!0,maxTokens:128e3,supportsStreaming:!0,supportsVision:!0,supportsAudio:!1,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"deepseek-r1",name:"DeepSeek R1",description:"Reasoning model on decentralized compute",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.1,outputTokens:.2}},{id:"llama-3.3-70b",name:"Llama 3.3 70B",description:"Meta's model on decentralized infrastructure",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.3,outputTokens:.5}},{id:"qwen-2.5-72b",name:"Qwen 2.5 72B",description:"Alibaba's multilingual model",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.4,outputTokens:.6}}],pricing:{inputTokens:.2,outputTokens:.4,currency:"USD"},rateLimit:{requestsPerMinute:100,tokensPerMinute:5e5}},groq:{id:"groq",name:"Groq",description:"Ultra-fast inference with GroqChip",apiUrl:"https://api.groq.com/openai/v1",requiresApiKey:!0,maxTokens:128e3,supportsStreaming:!0,supportsVision:!1,supportsAudio:!1,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"llama-3.3-70b-versatile",name:"Llama 3.3 70B",description:"Meta's model with ultra-fast inference",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.59,outputTokens:.79}},{id:"mixtral-8x7b-32768",name:"Mixtral 8x7B",description:"Mistral's mixture of experts model",contextLength:32768,supportsStreaming:!0,pricing:{inputTokens:.24,outputTokens:.24}},{id:"gemma2-9b-it",name:"Gemma 2 9B",description:"Google's efficient open model",contextLength:8192,supportsStreaming:!0,pricing:{inputTokens:.2,outputTokens:.2}}],pricing:{inputTokens:.5,outputTokens:.5,currency:"USD"},rateLimit:{requestsPerMinute:30,tokensPerMinute:6e3}},together:{id:"together",name:"Together AI",description:"Open-source models at scale",apiUrl:"https://api.together.xyz/v1",requiresApiKey:!0,maxTokens:128e3,supportsStreaming:!0,supportsVision:!0,supportsAudio:!1,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo",name:"Llama 3.1 70B Turbo",description:"Optimized version of Meta's flagship model",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.88,outputTokens:.88}},{id:"meta-llama/Llama-3.2-11B-Vision-Instruct-Turbo",name:"Llama 3.2 11B Vision",description:"Vision-capable Llama model",contextLength:128e3,supportsVision:!0,supportsStreaming:!0,pricing:{inputTokens:.18,outputTokens:.18}},{id:"Qwen/Qwen2.5-72B-Instruct-Turbo",name:"Qwen 2.5 72B",description:"Alibaba's multilingual model",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:.8,outputTokens:.8}}],pricing:{inputTokens:.6,outputTokens:.6,currency:"USD"},rateLimit:{requestsPerMinute:600,tokensPerMinute:1e6}},local:{id:"local",name:"Local/Ollama",description:"Local models via Ollama or custom endpoint",apiUrl:"http://localhost:11434/v1",requiresApiKey:!1,maxTokens:131e3,supportsStreaming:!0,supportsVision:!0,supportsAudio:!1,authHeader:"Authorization: Bearer {apiKey}",models:[{id:"llama3.2",name:"Llama 3.2",description:"Meta's latest model running locally",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:0,outputTokens:0}},{id:"qwen2.5",name:"Qwen 2.5",description:"Alibaba's model running locally",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:0,outputTokens:0}},{id:"deepseek-r1",name:"DeepSeek R1",description:"Reasoning model running locally",contextLength:128e3,supportsStreaming:!0,pricing:{inputTokens:0,outputTokens:0}}],pricing:{inputTokens:0,outputTokens:0,currency:"USD"},rateLimit:{requestsPerMinute:1e3,tokensPerMinute:1e7}}};function Ke(o){return W[o]}function Ie(){return Object.values(W)}Object.fromEntries(Object.entries(W).map(([o,i])=>[o,{name:i.name,max_tokens:i.maxTokens,id:i.id}]));function Ce({open:o,onClose:i,provider:n,error:m,onChange:l,localSettings:r,setLocalSettings:c}){const h=d.useCallback(()=>{localStorage.setItem("localSettings",JSON.stringify(r))},[r]);d.useEffect(()=>{h()},[h]);const a=Ke(n),f=Ie(),y=()=>{var M,w,u;if(!a||n==="auto")return null;const p=()=>{switch(n){case"openrouter":return r.openRouterApiKey;case"anthropic":return r.anthropicApiKey;case"openai":return r.openaiApiKey;case"google":return r.googleApiKey;case"xai":return r.xaiApiKey;case"chutes":return r.chutesApiKey;case"groq":return r.groqApiKey;case"together":return r.togetherApiKey;case"local":return r.apiKey;default:return""}},A=()=>{var t,s,k,v,x,K,T,B,L;switch(n){case"openrouter":return r.openRouterModel||((t=a.models[0])==null?void 0:t.id);case"anthropic":return r.anthropicModel||((s=a.models[0])==null?void 0:s.id);case"openai":return r.openaiModel||((k=a.models[0])==null?void 0:k.id);case"google":return r.googleModel||((v=a.models[0])==null?void 0:v.id);case"xai":return r.xaiModel||((x=a.models[0])==null?void 0:x.id);case"chutes":return r.chutesModel||((K=a.models[0])==null?void 0:K.id);case"groq":return r.groqModel||((T=a.models[0])==null?void 0:T.id);case"together":return r.togetherModel||((B=a.models[0])==null?void 0:B.id);case"local":return r.model||((L=a.models[0])==null?void 0:L.id);default:return""}},V=()=>{switch(n){case"openrouter":return r.openRouterApiUrl||a.apiUrl;case"local":return r.apiUrl||a.apiUrl;default:return a.apiUrl}},P=t=>{switch(n){case"openrouter":c(s=>({...s,openRouterApiKey:t}));break;case"anthropic":c(s=>({...s,anthropicApiKey:t}));break;case"openai":c(s=>({...s,openaiApiKey:t}));break;case"google":c(s=>({...s,googleApiKey:t}));break;case"xai":c(s=>({...s,xaiApiKey:t}));break;case"chutes":c(s=>({...s,chutesApiKey:t}));break;case"groq":c(s=>({...s,groqApiKey:t}));break;case"together":c(s=>({...s,togetherApiKey:t}));break;case"local":c(s=>({...s,apiKey:t}));break}},z=t=>{switch(n){case"openrouter":c(s=>({...s,openRouterModel:t}));break;case"anthropic":c(s=>({...s,anthropicModel:t}));break;case"openai":c(s=>({...s,openaiModel:t}));break;case"google":c(s=>({...s,googleModel:t}));break;case"xai":c(s=>({...s,xaiModel:t}));break;case"chutes":c(s=>({...s,chutesModel:t}));break;case"groq":c(s=>({...s,groqModel:t}));break;case"together":c(s=>({...s,togetherModel:t}));break;case"local":c(s=>({...s,model:t}));break}},j=t=>{switch(n){case"openrouter":c(s=>({...s,openRouterApiUrl:t}));break;case"local":c(s=>({...s,apiUrl:t}));break}},S=()=>{switch(n){case"openrouter":return"https://openrouter.ai/keys";case"anthropic":return"https://console.anthropic.com/";case"openai":return"https://platform.openai.com/api-keys";case"google":return"https://aistudio.google.com/app/apikey";case"xai":return"https://console.x.ai/";case"chutes":return"https://chutes.ai/app";case"groq":return"https://console.groq.com/keys";case"together":return"https://api.together.xyz/settings/api-keys";default:return"#"}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-800 text-sm font-medium",children:[a.name," Settings"]}),a.requiresApiKey&&e.jsx("a",{href:S(),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:text-blue-600",children:"Get API Key"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description}),e.jsx("hr",{className:"border-gray-200"}),a.requiresApiKey&&e.jsxs("label",{className:"block",children:[e.jsxs("p",{className:"text-gray-800 text-sm font-medium mb-1",children:["API Key"," ",a.requiresApiKey&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:p(),onChange:t=>P(t.target.value),placeholder:p()===""?`Using environment variable or enter your ${a.name} API key`:`Enter your ${a.name} API key`,className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(n==="local"||n==="openrouter")&&e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"API URL"}),e.jsx("input",{type:"text",value:V(),onChange:t=>j(t.target.value),className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium mb-1",children:"Model"}),e.jsx("select",{value:A(),onChange:t=>z(t.target.value),className:"w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.models.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.pricing&&`($${t.pricing.inputTokens}/$${t.pricing.outputTokens})`]},t.id))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Context:"," ",((w=(M=a.models.find(t=>t.id===A()))==null?void 0:M.contextLength)==null?void 0:w.toLocaleString())||"N/A"," ","tokens"]})]}),a.pricing&&e.jsxs("div",{className:"bg-gray-50 p-2 rounded-md",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Pricing:"})," $",a.pricing.inputTokens,"/M input, $",a.pricing.outputTokens,"/M output tokens"]}),a.rateLimit&&e.jsxs("p",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Rate Limit:"})," ",a.rateLimit.requestsPerMinute," req/min,"," ",(u=a.rateLimit.tokensPerMinute)==null?void 0:u.toLocaleString()," ","tokens/min"]})]})]})};return e.jsxs("div",{className:"",children:[e.jsx("button",{type:"button",className:"relative overflow-hidden cursor-pointer flex-none flex items-center justify-center rounded-full text-base font-semibold size-8 text-center bg-gray-800 hover:bg-gray-700 text-gray-100 shadow-sm dark:shadow-highlight/20",onClick:()=>{i(p=>!p)},children:e.jsx(ce,{})}),e.jsx("div",{className:b("h-screen w-screen bg-black/20 fixed left-0 top-0 z-40",{"opacity-0 pointer-events-none":!o}),onClick:()=>i(!1),role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&i(!1)}}),e.jsxs("div",{className:b("absolute top-0 -translate-y-[calc(100%+16px)] right-0 z-40 w-96 bg-white border border-gray-200 rounded-lg shadow-lg transition-all duration-75 overflow-hidden max-h-[80vh] overflow-y-auto",{"opacity-0 pointer-events-none":!o}),children:[e.jsxs("header",{className:"flex items-center text-sm px-4 py-2 border-b border-gray-200 gap-2 bg-gray-100 font-semibold text-gray-700 sticky top-0",children:[e.jsx("span",{className:"text-xs bg-blue-500/10 text-blue-500 rounded-full pl-1.5 pr-2.5 py-0.5 flex items-center justify-start gap-1.5",children:"Provider"}),"AI Provider Settings"]}),e.jsxs("main",{className:"px-4 pt-3 pb-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-800 text-sm font-medium flex items-center justify-between",children:"Use auto-provider"}),e.jsx("div",{className:b("bg-gray-200 rounded-full w-10 h-6 flex items-center justify-between p-1 cursor-pointer transition-all duration-200",{"!bg-blue-500":n==="auto"}),onClick:()=>{l(n==="auto"?"openrouter":"auto")},role:"switch","aria-checked":n==="auto",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&l(n==="auto"?"openrouter":"auto")},children:e.jsx("div",{className:b("w-4 h-4 rounded-full shadow-md transition-all duration-200 bg-white",{"translate-x-4":n==="auto"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"We'll automatically select the best provider for you based on your prompt."})]}),m!==""&&e.jsx("p",{className:"text-red-500 text-sm font-medium mb-2 flex items-center justify-between bg-red-500/10 p-2 rounded-md",children:m}),e.jsxs("div",{className:"block",children:[e.jsxs("p",{className:"text-gray-800 text-sm font-medium mb-2 flex items-center justify-between",children:["AI Provider (",f.length," available)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:f.map(p=>e.jsxs("button",{type:"button",className:b("text-gray-600 text-sm font-medium cursor-pointer border p-2 rounded-md flex items-center justify-start gap-2 text-left relative",{"bg-blue-500/10 border-blue-500/15 text-blue-500":p.id===n,"hover:bg-gray-100 border-gray-100":p.id!==n}),onClick:()=>{l(p.id)},children:[e.jsx("img",{src:`/apps/vibesynq/providers/${p.id??"default"}.svg`,alt:p.name,className:"size-5",onError:A=>{}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:p.name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[p.models.length," models"]})]}),!p.requiresApiKey&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs px-1 rounded-full",children:"Free"})]},p.id))})]}),y()]})]})]})}function Ue({open:o,html:i,onClose:n}){const[,m]=F("html_content"),l=()=>{i!==R&&m(i)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:b("h-screen w-screen bg-black/20 fixed left-0 top-0 z-40",{"opacity-0 pointer-events-none":!o}),onClick:()=>n(!1),role:"button",tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&n(!1)}}),e.jsxs("div",{className:b("absolute top-0 -translate-y-[calc(100%+16px)] right-0 z-40 w-96 bg-white border border-gray-200 rounded-lg shadow-lg transition-all duration-75 overflow-hidden",{"opacity-0 pointer-events-none":!o}),children:[e.jsxs("header",{className:"flex items-center text-sm px-4 py-2 border-b border-gray-200 gap-2 bg-gray-100 font-semibold text-gray-700",children:[e.jsx("span",{className:"bg-linear-to-br shadow-green-500/10 dark:shadow-green-500/20 inline-block -skew-x-12 border border-gray-200 from-pink-300 via-green-200 to-yellow-200 text-xs font-bold text-black shadow-lg dark:from-pink-500 dark:via-green-500 dark:to-yellow-500 dark:text-black rounded-lg px-2.5 py-0.5 ",children:"PRO"}),"Your free inference quota is exhausted"]}),e.jsxs("main",{className:"px-4 pt-3 pb-4",children:[e.jsx("p",{className:"text-gray-950 text-sm font-semibold flex items-center justify-between",children:"Upgrade to a PRO account to activate Inference Providers and continue using Vibesynq."}),e.jsx("p",{className:"text-sm text-pretty text-gray-500 mt-2",children:"It also unlocks thousands of Space apps powered by ZeroGPU for 3d, audio, music, video and more!"}),e.jsx("a",{href:"https://huggingface.co/subscribe/pro",target:"_blank",rel:"noreferrer",className:"mt-4 bg-black text-white cursor-pointer rounded-full py-2 px-3 text-sm font-medium w-full block text-center hover:bg-gray-800 transition duration-200 ease-in-out",onClick:l,children:"Subscribe to PRO ($9/month)"})]})]})]})}const D={apiKey:"",apiUrl:"http://localhost:11434/v1",model:"gemma3:1b",openRouterApiKey:"",openRouterApiUrl:"https://openrouter.ai/api/v1",openRouterModel:"deepseek/deepseek-chat-v3-0324:free"};function Oe({html:o,defaultHTML:i,setHtml:n,onScrollToBottom:m,isAiWorking:l,setisAiWorking:r,setView:c,onNewPrompt:h}){const[a,f]=d.useState(!1),[y,p]=d.useState(""),[A,V]=d.useState(!1),[P,z]=d.useState(""),[j,S]=F("provider","auto"),[M,w]=d.useState(!1),[u,t]=d.useState(""),[s,k]=d.useState(!1),[v,x]=d.useState(""),[K,T]=d.useState(!1),[B,L]=d.useState(()=>{const g=localStorage.getItem("localSettings");try{return g?{...D,...JSON.parse(g)}:D}catch{return D}}),Q=d.useCallback(()=>{const g=localStorage.getItem("localSettings");if(g)try{const I=JSON.parse(g);L({...D,...I})}catch(I){console.error("Failed to parse localSettings from localStorage",I),L(D)}else L(D)},[]);d.useEffect(()=>{Q()},[Q]);const[re]=d.useState(()=>{const g=new Audio(Re);return g.volume=.5,g}),Y=async()=>{if(l||!y.trim())return;r(!0),T(!1),x(""),t("");let g="",I=0;try{h(y);const C={prompt:y,provider:j,localSettings:B};o!==i&&(C.html=o),P&&(C.previousPrompt=P);const U=await fetch("/api/vibesynq-ai",{method:"POST",body:JSON.stringify(C),headers:{"Content-Type":"application/json"}});if(U!=null&&U.body){if(!U.ok){const q=await U.json();q.openLogin?f(!0):q.openSelectProvider?(w(!0),t(q.message)):q.openProModal?k(!0):N.error(q.message),T(!1),x(""),r(!1);return}const se=U.body.getReader(),ne=new TextDecoder("utf-8");T(!0),x("Connecting to AI...");const J=async()=>{var Z,ee;const{done:q,value:oe}=await se.read();if(q){T(!1),x(""),N.success("AI responded successfully"),p(""),z(y),r(!1),V(!0);try{re.play().catch(O=>console.log("Audio play failed:",O))}catch(O){console.log("Audio play error:",O)}c("preview");const E=(Z=g.match(/<!DOCTYPE html>[\s\S]*<\/html>/))==null?void 0:Z[0];E&&n(E);return}const ie=ne.decode(oe,{stream:!0});g+=ie;const _=g.length,ae=Math.min(100,Math.floor(_/20));_<100?x("AI is thinking..."):_<500?x(`Generating response... (${ae}%)`):x(`Streaming content... (${_} characters)`);const X=(ee=g.match(/<!DOCTYPE html>[\s\S]*/))==null?void 0:ee[0];if(X){let E=X;E.includes("</html>")||(E+=`
</html>`);const O=Date.now();O-I>200&&(n(E),I=O),E.length>200&&m()}J()};J()}}catch(C){T(!1),x(""),r(!1),N.error(C.message),C.openLogin&&f(!0)}};return e.jsxs("div",{className:`bg-gray-950 rounded-xl py-2 lg:py-2.5 pl-3.5 lg:pl-4 pr-2 lg:pr-2.5 absolute lg:sticky bottom-3 left-3 lg:bottom-4 lg:left-4 w-[calc(100%-1.5rem)] lg:w-[calc(100%-2rem)] z-10 group ${l?"animate-pulse":""}`,children:[i!==o&&e.jsxs("button",{type:"button",className:"bg-white lg:hidden -translate-y-[calc(100%+8px)] absolute left-0 top-0 shadow-md text-gray-950 text-xs font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-100 hover:brightness-150 transition-all duration-100 cursor-pointer",onClick:()=>c("preview"),children:[e.jsx(pe,{className:"text-sm"}),"View Preview"]}),K&&v&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border border-blue-500/30 rounded-lg px-3 py-2 mb-2 text-xs text-blue-200 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),e.jsx("span",{className:"font-medium",children:v}),e.jsxs("div",{className:"ml-auto flex gap-1",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),e.jsxs("div",{className:"w-full relative flex items-center justify-between",children:[e.jsx(de,{className:"text-lg lg:text-xl text-gray-500 group-focus-within:text-pink-500"}),e.jsx("input",{type:"text",disabled:l,className:"w-full bg-transparent max-lg:text-sm outline-none px-3 text-white placeholder:text-gray-500 font-code",placeholder:A?"What do you want to ask AI next?":"Ask AI anything...",value:y,onChange:g=>p(g.target.value),onKeyDown:g=>{g.key==="Enter"&&Y()}}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(Ce,{provider:j,onChange:S,open:M,error:u,onClose:w,setLocalSettings:L,localSettings:B}),e.jsx("button",{type:"button",disabled:l,className:"relative overflow-hidden cursor-pointer flex-none flex items-center justify-center rounded-full text-sm font-semibold size-8 text-center bg-pink-500 hover:bg-pink-400 text-white shadow-sm dark:shadow-highlight/20 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed disabled:hover:bg-gray-300",onClick:Y,children:e.jsx(me,{className:"-translate-x-[1px]"})})]})]}),e.jsx("button",{type:"button","aria-label":"Close modal",className:b("h-screen w-screen bg-black/20 fixed left-0 top-0 z-10",{"opacity-0 pointer-events-none":!a,"cursor-default":!a}),onClick:()=>f(!1),disabled:!a}),e.jsx("div",{className:b("absolute top-0 -translate-y-[calc(100%+8px)] right-0 z-10 w-80 bg-white border border-gray-200 rounded-lg shadow-lg transition-all duration-75 overflow-hidden",{"opacity-0 pointer-events-none":!a}),children:e.jsx(Ee,{html:o,children:e.jsx("p",{className:"text-gray-500 text-sm mb-3",children:"You reached the limit of free AI usage. Please login to continue."})})}),e.jsx(Ue,{html:o,open:s,onClose:()=>k(!1)})]})}function De({html:o,isResizing:i,isAiWorking:n,setView:m,ref:l}){const r=d.useRef(null),c=()=>{if(r.current){const h=r.current,a=h.srcdoc;h.srcdoc="",setTimeout(()=>{h.srcdoc=a},10)}};return e.jsxs("button",{ref:l,type:"button",className:"w-full border-l border-gray-900 bg-white h-[calc(100dvh-49px)] lg:h-[calc(100dvh-53px)] relative text-left align-top",onClick:h=>{n&&(h.preventDefault(),h.stopPropagation(),N.warn("Please wait for the AI to finish working."))},children:[e.jsx("iframe",{ref:r,title:"output",className:b("w-full h-full select-none",{"pointer-events-none":i||n}),srcDoc:o}),e.jsxs("div",{className:"flex items-center justify-start gap-3 absolute bottom-3 lg:bottom-5 max-lg:left-3 lg:right-5",children:[e.jsxs("button",{type:"button",className:"lg:hidden bg-gray-950 shadow-md text-white text-xs lg:text-sm font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-900 hover:brightness-150 transition-all duration-100 cursor-pointer",onClick:()=>m("editor"),children:[e.jsx(ge,{className:"text-sm"}),"Hide preview"]}),o===R&&e.jsxs("a",{href:"https://github.com/Multisynq/vibesynq",target:"_blank",rel:"noreferrer",className:"bg-gray-200 text-gray-950 text-xs lg:text-sm font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-200 hover:bg-gray-300 transition-all duration-100 cursor-pointer",children:["⭐ ",e.jsx("span",{children:"Give a Star on GitHub"})]}),!n&&e.jsxs("button",{type:"button",className:"bg-white lg:bg-gray-950 shadow-md text-gray-950 lg:text-white text-xs lg:text-sm font-medium py-2 px-3 lg:px-4 rounded-lg flex items-center gap-2 border border-gray-100 lg:border-gray-900 hover:brightness-150 transition-all duration-100 cursor-pointer",onClick:c,children:[e.jsx(he,{className:"text-sm"}),"Refresh Preview"]})]})]})}function Ve(){const[o,,i]=F("html_content"),n=d.useRef(null),m=d.useRef(null),l=d.useRef(null),r=d.useRef(null),[c,h]=d.useState(!1),[,a]=d.useState(!1),[f,y]=d.useState(o??R),[p,A]=d.useState(!1),[V,P]=d.useState("editor"),[,z]=d.useState([]),j=()=>{var u;if(!(!m.current||!n.current))if(window.innerWidth>=1024){const t=((u=l.current)==null?void 0:u.offsetWidth)??8,s=window.innerWidth-t,k=s/3,v=s-k;m.current.style.width=`${k}px`,n.current.style.width=`${v}px`}else m.current.style.width="",n.current.style.width=""},S=u=>{if(!m.current||!n.current||!l.current)return;const t=l.current.offsetWidth,s=100,k=window.innerWidth-t-s,v=u.clientX,x=Math.max(s,Math.min(v,k)),K=window.innerWidth-x-t;m.current.style.width=`${x}px`,n.current.style.width=`${K}px`},M=()=>{h(!0),document.addEventListener("mousemove",S),document.addEventListener("mouseup",w)},w=()=>{h(!1),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",w)};return xe("beforeunload",u=>{if(p||f!==R)return u.preventDefault(),""}),fe(()=>{o&&(i(),N.warn("Previous HTML content restored from local storage.")),j(),l.current&&(l.current.addEventListener("mousedown",M),window.addEventListener("resize",j))}),be(()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",w),l.current&&l.current.removeEventListener("mousedown",M),window.removeEventListener("resize",j)}),e.jsxs("div",{className:"h-screen bg-gray-950 font-sans overflow-hidden",children:[e.jsx(Se,{onReset:()=>{var u,t,s;if(p){N.warn("Please wait for the AI to finish working.");return}window.confirm("You're about to reset the editor. Are you sure?")&&(y(R),a(!1),i(),(s=r.current)==null||s.revealLine(((t=(u=r.current)==null?void 0:u.getModel())==null?void 0:t.getLineCount())??0))},children:e.jsx(Me,{html:f})}),e.jsxs("main",{className:"max-lg:flex-col flex w-full",children:[e.jsxs("div",{ref:m,className:b("w-full h-[calc(100dvh-49px)] lg:h-[calc(100dvh-54px)] relative overflow-hidden max-lg:transition-all max-lg:duration-200 select-none",{"max-lg:h-0":V==="preview"}),children:[e.jsx(qe,{}),e.jsx("fieldset",{onClick:u=>{var t;p?(u.preventDefault(),u.stopPropagation(),N.warn("Please wait for the AI to finish working.")):(t=r.current)==null||t.focus()},onKeyDown:u=>{var t;(u.key==="Enter"||u.key===" ")&&(p||(t=r.current)==null||t.focus())},children:e.jsx(ye,{language:"html",theme:"vs-dark",className:b("h-[calc(100dvh-90px)] lg:h-[calc(100dvh-96px)]",{"pointer-events-none":p}),value:f,onValidate:u=>{(u==null?void 0:u.length)>0&&a(!0)},onChange:u=>{y(u??""),a(!1)},onMount:u=>{r.current=u}})}),e.jsx(Oe,{html:f,defaultHTML:R,setHtml:y,isAiWorking:p,setisAiWorking:A,setView:P,onNewPrompt:u=>{z(t=>[...t,u])},onScrollToBottom:()=>{var u,t,s;(s=r.current)==null||s.revealLine(((t=(u=r.current)==null?void 0:u.getModel())==null?void 0:t.getLineCount())??0)}})]}),e.jsx("div",{ref:l,className:"bg-gray-700 hover:bg-blue-500 w-2 cursor-col-resize h-[calc(100dvh-53px)] max-lg:hidden"}),e.jsx(De,{html:f,isResizing:c,isAiWorking:p,ref:n,setView:P})]})]})}class ze extends d.Component{constructor(i){super(i),this.state={hasError:!1}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,n){console.error("Uncaught error:",i,n)}render(){var i;return this.state.hasError?e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h1",{children:"Something went wrong."}),e.jsx("p",{children:(i=this.state.error)==null?void 0:i.toString()}),e.jsx("button",{type:"button",onClick:()=>this.setState({hasError:!1,error:void 0}),children:"Try again"})]}):this.props.children}}const Be=Ae("root"),Ge=e.jsx(d.StrictMode,{children:e.jsxs(ze,{children:[e.jsx(Ve,{}),e.jsx(we,{className:"pt-11 max-md:p-4"})]})});ke.createRoot(Be).render(Ge);
