import{r as l,V as R,u as P,j as e,E as A,Q as D,a as B,c as N}from"./vendor-BpQwaGzM.js";import{D as O,E as v}from"./constants-Ccg4jrOb.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const g={BASE_URL:"/apps/admin/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var _={};const q=typeof process<"u",C=typeof window<"u";function x(r){if(q)return _[r];if(C&&typeof import.meta<"u"&&g)return g[`VITE_${r}`]||g[r]}x("PORT");x("HOST")??O.HOST;const L=x("NODE_ENV"),I=L===v.Production||C&&v.Production==="production";x("DEFAULT_APP");x("APPS_DIR");const H={IS_PROD:I},T=r=>{const n=document.getElementById(r);if(!n)throw new Error(`Element with id '${r}' not found`);return n},U=async()=>{H.IS_PROD&&navigator.serviceWorker&&(navigator.serviceWorker.controller||await navigator.serviceWorker.register("sw.js",{type:"module",scope:"/"}))},k=l.createContext(null),V=R(window.location.origin),$=()=>({helloHttp:n=>P({queryKey:["hello-http",n],queryFn:async()=>{const{data:o,error:d}=await V.api.hello.get({query:{name:n}});if(d)throw d.value;return o}})}),M=({children:r})=>{const[n,o]=l.useState(0),{helloHttp:d}=$(),{data:t}=d();return l.useEffect(()=>{t&&console.log(`http: ${t.message}`)},[t]),e.jsx(k.Provider,{value:{count:n,setCount:o},children:r})},W=({error:r,resetErrorBoundary:n})=>e.jsxs("div",{role:"alert",className:"flex-center-col",children:[e.jsx("p",{children:"Oops! Something went wrong:"}),e.jsx("div",{style:{color:"red",width:"100%"},children:r.message}),e.jsx("button",{type:"button",onClick:n,children:"Clear State and Refresh"})]}),z=({children:r})=>e.jsx(A,{FallbackComponent:W,onReset:()=>{sessionStorage.clear(),window.location.reload()},onError:(n,o)=>console.error(n,o),children:r}),Q="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20aria-label='Bun'%20role='img'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='m0%200H512V512H0'%20fill='none'/%3e%3cpath%20d='m150%20139c50-27%2078-51%20102-51s52%2024%20102%2051a182%20145%200%2011-204%200z'%20fill='%23fbf0df'%20stroke='%23000'%20stroke-width='12'/%3e%3cpath%20d='m126%20356a199%20167%209%2000298-126A176%20139%200%2001126%20356'%20fill='%23f6dece'/%3e%3cpath%20d='m224%20114q-18%2036-54%2046%2044%200%2054-46zm15-7q0%2038-29%2064%2039-16%2029-64zm11-1q19%2030%209%2069%2024-36-9-69zm14-1q31%2024%2035%2060%209-42-35-60z'%20fill='%23ccbea7'%20stroke='%23ccbea7'%20stroke-width='3'%20stroke-linejoin='round'/%3e%3cpath%20d='m175%20264a29%2017%200%20102%200h150a29%2017%200%20102%200'%20fill='%23febbd0'/%3e%3cpath%20d='m190%20219a28%2028%200%20101%200h123a28%2028%200%20101%200m92-45A190%20151%201%2011111%20359q249%20122%20325-93'/%3e%3cpath%20d='m76%20265c31-108%2086-116%20109-130s54-40%2082-38c-30-11-57%2016-101%2040s-90%2057-90%20128m105-37a10%2010%200%20101%200h123a10%2010%200%20101%200'%20fill='%23fff'/%3e%3cg%20stroke='%23000'%3e%3cpath%20d='M284%20292c10%200-8%2035-32%2037-24-2-42-37-32-37Z'%20fill='%23b71422'%20stroke-width='6'/%3e%3cpath%20d='m229%20316a31%2031%200%200149-3q-25%2030-49%203'%20fill='%23ff6164'%20stroke-width='5'/%3e%3c/g%3e%3c/svg%3e",G=()=>{const r=l.useContext(k);if(!r)throw new Error("useAppContext must be used within a child component of AppContextProvider");return r};function K(){const[r,n]=l.useState([]),[o,d]=l.useState(""),[t,s]=l.useState(""),[f,b]=l.useState(""),[y,u]=l.useState(""),[j,w]=l.useState(""),[p,h]=l.useState(!1),m=async(i="")=>{h(!0),u("");try{const c=await(await fetch(`/api/admin/files?dir=${encodeURIComponent(i)}`)).json();if(c.error){u(c.error);return}c.files&&(n(c.files),d(c.currentDir||""))}catch(a){u(`Failed to fetch files: ${a instanceof Error?a.message:String(a)}`)}finally{h(!1)}},S=async i=>{i.preventDefault(),h(!0),u(""),w("");try{if(!t.trim()){u("File name is required"),h(!1);return}const c=await(await fetch(`/api/admin/upload?dir=${encodeURIComponent(o)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,content:f})})).json();if(c.error){u(c.error);return}c.success&&(w(`File ${c.path} uploaded successfully`),s(""),b(""),m(o))}catch(a){u(`Failed to upload file: ${a instanceof Error?a.message:String(a)}`)}finally{h(!1)}},E=i=>{m(i)},F=()=>{if(!o)return;const i=o.split("/").filter(Boolean);i.pop();const a=i.join("/");m(a)};return l.useEffect(()=>{(async()=>{await m()})()},[]),e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px",fontFamily:"system-ui, sans-serif"},children:[e.jsx("h1",{children:"Admin File Manager"}),y&&e.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",marginBottom:"20px",borderRadius:"4px"},children:y}),j&&e.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",marginBottom:"20px",borderRadius:"4px"},children:j}),e.jsxs("div",{style:{marginBottom:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[e.jsx("strong",{children:"Current Directory:"})," ",o||"/"," ",o&&e.jsx("button",{type:"button",onClick:F,disabled:p,style:{padding:"5px 10px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go Up"})]}),e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h2",{children:"Files"}),p?e.jsx("div",{children:"Loading..."}):e.jsxs("ul",{style:{listStyle:"none",padding:0},children:[r.length===0&&e.jsx("li",{children:"No files in this directory"}),r.map(i=>e.jsx("li",{style:{padding:"8px",borderBottom:"1px solid #eee"},children:i.isDirectory?e.jsxs("button",{type:"button",onClick:()=>E(i.path),disabled:p,style:{background:"none",border:"none",cursor:"pointer",color:"#2196f3",fontWeight:"bold",display:"inline-block",textAlign:"left",width:"100%"},children:["📁 ",i.name]}):e.jsxs("span",{children:["📄 ",i.name]})},i.path))]})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Upload File"}),e.jsxs("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fileName",style:{display:"block",marginBottom:"5px"},children:"File Name:"}),e.jsx("input",{type:"text",id:"fileName",value:t,onChange:i=>s(i.target.value),required:!0,disabled:p,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fileContent",style:{display:"block",marginBottom:"5px"},children:"Content:"}),e.jsx("textarea",{id:"fileContent",value:f,onChange:i=>b(i.target.value),rows:10,disabled:p,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),e.jsx("button",{type:"submit",disabled:p,style:{padding:"10px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",...p?{backgroundColor:"#bdbdbd"}:{}},children:p?"Uploading...":"Upload File"})]})]})]})}function J(){const[r,n]=l.useState(""),[o,d]=l.useState(!1),t=s=>{s.preventDefault(),r==="admin123"?d(!0):alert("Invalid password")};return o?e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"10px",backgroundColor:"#f0f0f0",marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Admin Panel"}),e.jsx("button",{type:"button",onClick:()=>d(!1),style:{padding:"8px 12px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Logout"})]}),e.jsx(K,{})]}):e.jsxs("div",{style:{maxWidth:"400px",margin:"100px auto",padding:"20px"},children:[e.jsx("h1",{children:"Admin Login"}),e.jsxs("form",{onSubmit:t,children:[e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"5px"},children:"Password:"}),e.jsx("input",{id:"password",type:"password",value:r,onChange:s=>n(s.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},required:!0})]}),e.jsx("button",{type:"submit",style:{padding:"10px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Login"})]})]})}const Z=()=>{const{count:r,setCount:n}=G(),[o,d]=l.useState("home"),t=()=>e.jsxs("div",{className:"flex-center-col",children:[e.jsx("h1",{children:"hello from bun!"}),e.jsx("img",{src:Q,width:250,height:250,alt:"hello from bun!"}),e.jsx("p",{children:"Hot-reloads with persisted state on file save."}),e.jsxs("button",{type:"button",onClick:()=>n(s=>s+1),children:["Count: ",r]}),e.jsx("button",{type:"button",className:"link-btn",onClick:()=>n(0),children:"Reset Count"})]});return e.jsxs("div",{children:[e.jsxs("nav",{style:{padding:"10px",backgroundColor:"#f8f9fa",marginBottom:"20px",display:"flex",gap:"15px"},children:[e.jsx("button",{type:"button",onClick:()=>d("home"),style:{padding:"8px 16px",backgroundColor:o==="home"?"#2196f3":"transparent",color:o==="home"?"white":"black",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Home"}),e.jsx("button",{type:"button",onClick:()=>d("admin"),style:{padding:"8px 16px",backgroundColor:o==="admin"?"#2196f3":"transparent",color:o==="admin"?"white":"black",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Admin"})]}),o==="home"&&t(),o==="admin"&&e.jsx(J,{})]})},X=T("root"),Y=e.jsx(l.StrictMode,{children:e.jsx(z,{children:e.jsx(D,{client:new B,children:e.jsx(M,{children:e.jsx(Z,{})})})})});N.createRoot(X).render(Y);U().catch(console.error);
