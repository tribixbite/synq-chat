import{r as l,V as k,u as S,j as e,E as F,Q as E,a as R,c as A}from"./vendor-BpQwaGzM.js";import{E as B}from"./constants-Bb3Q49nK.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();const P=B.Production==="production",N={IS_PROD:P},q=n=>{const o=document.getElementById(n);if(!o)throw new Error(`Element with id '${n}' not found`);return o},D=async()=>{N.IS_PROD&&navigator.serviceWorker&&(navigator.serviceWorker.controller||await navigator.serviceWorker.register("sw.js",{type:"module",scope:"/"}))},j=l.createContext(null),L=k(window.location.origin),O=()=>({helloHttp:o=>S({queryKey:["hello-http",o],queryFn:async()=>{const{data:r,error:a}=await L.api.hello.get({query:{name:o}});if(a)throw a.value;return r}})}),I=({children:n})=>{const[o,r]=l.useState(0),{helloHttp:a}=O(),{data:t}=a();return l.useEffect(()=>{t&&console.log(`http: ${t.message}`)},[t]),e.jsx(j.Provider,{value:{count:o,setCount:r},children:n})},H=({error:n,resetErrorBoundary:o})=>e.jsxs("div",{role:"alert",className:"flex-center-col",children:[e.jsx("p",{children:"Oops! Something went wrong:"}),e.jsx("div",{style:{color:"red",width:"100%"},children:n.message}),e.jsx("button",{type:"button",onClick:o,children:"Clear State and Refresh"})]}),$=({children:n})=>e.jsx(F,{FallbackComponent:H,onReset:()=>{sessionStorage.clear(),window.location.reload()},onError:(o,r)=>console.error(o,r),children:n}),U="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20aria-label='Bun'%20role='img'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='m0%200H512V512H0'%20fill='none'/%3e%3cpath%20d='m150%20139c50-27%2078-51%20102-51s52%2024%20102%2051a182%20145%200%2011-204%200z'%20fill='%23fbf0df'%20stroke='%23000'%20stroke-width='12'/%3e%3cpath%20d='m126%20356a199%20167%209%2000298-126A176%20139%200%2001126%20356'%20fill='%23f6dece'/%3e%3cpath%20d='m224%20114q-18%2036-54%2046%2044%200%2054-46zm15-7q0%2038-29%2064%2039-16%2029-64zm11-1q19%2030%209%2069%2024-36-9-69zm14-1q31%2024%2035%2060%209-42-35-60z'%20fill='%23ccbea7'%20stroke='%23ccbea7'%20stroke-width='3'%20stroke-linejoin='round'/%3e%3cpath%20d='m175%20264a29%2017%200%20102%200h150a29%2017%200%20102%200'%20fill='%23febbd0'/%3e%3cpath%20d='m190%20219a28%2028%200%20101%200h123a28%2028%200%20101%200m92-45A190%20151%201%2011111%20359q249%20122%20325-93'/%3e%3cpath%20d='m76%20265c31-108%2086-116%20109-130s54-40%2082-38c-30-11-57%2016-101%2040s-90%2057-90%20128m105-37a10%2010%200%20101%200h123a10%2010%200%20101%200'%20fill='%23fff'/%3e%3cg%20stroke='%23000'%3e%3cpath%20d='M284%20292c10%200-8%2035-32%2037-24-2-42-37-32-37Z'%20fill='%23b71422'%20stroke-width='6'/%3e%3cpath%20d='m229%20316a31%2031%200%200149-3q-25%2030-49%203'%20fill='%23ff6164'%20stroke-width='5'/%3e%3c/g%3e%3c/svg%3e",W=()=>{const n=l.useContext(j);if(!n)throw new Error("useAppContext must be used within a child component of AppContextProvider");return n};function M(){const[n,o]=l.useState([]),[r,a]=l.useState(""),[t,s]=l.useState(""),[h,m]=l.useState(""),[g,u]=l.useState(""),[b,y]=l.useState(""),[p,x]=l.useState(!1),f=async(i="")=>{x(!0),u("");try{const c=await(await fetch(`/api/admin/files?dir=${encodeURIComponent(i)}`)).json();if(c.error){u(c.error);return}c.files&&(o(c.files),a(c.currentDir||""))}catch(d){u(`Failed to fetch files: ${d instanceof Error?d.message:String(d)}`)}finally{x(!1)}},w=async i=>{i.preventDefault(),x(!0),u(""),y("");try{if(!t.trim()){u("File name is required"),x(!1);return}const c=await(await fetch(`/api/admin/upload?dir=${encodeURIComponent(r)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,content:h})})).json();if(c.error){u(c.error);return}c.success&&(y(`File ${c.path} uploaded successfully`),s(""),m(""),f(r))}catch(d){u(`Failed to upload file: ${d instanceof Error?d.message:String(d)}`)}finally{x(!1)}},v=i=>{f(i)},C=()=>{if(!r)return;const i=r.split("/").filter(Boolean);i.pop();const d=i.join("/");f(d)};return l.useEffect(()=>{(async()=>{await f()})()},[]),e.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px",fontFamily:"system-ui, sans-serif"},children:[e.jsx("h1",{children:"Admin File Manager"}),g&&e.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"10px",marginBottom:"20px",borderRadius:"4px"},children:g}),b&&e.jsx("div",{style:{backgroundColor:"#e8f5e9",color:"#2e7d32",padding:"10px",marginBottom:"20px",borderRadius:"4px"},children:b}),e.jsxs("div",{style:{marginBottom:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[e.jsx("strong",{children:"Current Directory:"})," ",r||"/"," ",r&&e.jsx("button",{type:"button",onClick:C,disabled:p,style:{padding:"5px 10px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go Up"})]}),e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h2",{children:"Files"}),p?e.jsx("div",{children:"Loading..."}):e.jsxs("ul",{style:{listStyle:"none",padding:0},children:[n.length===0&&e.jsx("li",{children:"No files in this directory"}),n.map(i=>e.jsx("li",{style:{padding:"8px",borderBottom:"1px solid #eee"},children:i.isDirectory?e.jsxs("button",{type:"button",onClick:()=>v(i.path),disabled:p,style:{background:"none",border:"none",cursor:"pointer",color:"#2196f3",fontWeight:"bold",display:"inline-block",textAlign:"left",width:"100%"},children:["ðŸ“ ",i.name]}):e.jsxs("span",{children:["ðŸ“„ ",i.name]})},i.path))]})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"Upload File"}),e.jsxs("form",{onSubmit:w,style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fileName",style:{display:"block",marginBottom:"5px"},children:"File Name:"}),e.jsx("input",{type:"text",id:"fileName",value:t,onChange:i=>s(i.target.value),required:!0,disabled:p,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fileContent",style:{display:"block",marginBottom:"5px"},children:"Content:"}),e.jsx("textarea",{id:"fileContent",value:h,onChange:i=>m(i.target.value),rows:10,disabled:p,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})]}),e.jsx("button",{type:"submit",disabled:p,style:{padding:"10px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",...p?{backgroundColor:"#bdbdbd"}:{}},children:p?"Uploading...":"Upload File"})]})]})]})}function z(){const[n,o]=l.useState(""),[r,a]=l.useState(!1),t=s=>{s.preventDefault(),n==="admin123"?a(!0):alert("Invalid password")};return r?e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"10px",backgroundColor:"#f0f0f0",marginBottom:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h1",{style:{margin:0},children:"Admin Panel"}),e.jsx("button",{type:"button",onClick:()=>a(!1),style:{padding:"8px 12px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Logout"})]}),e.jsx(M,{})]}):e.jsxs("div",{style:{maxWidth:"400px",margin:"100px auto",padding:"20px"},children:[e.jsx("h1",{children:"Admin Login"}),e.jsxs("form",{onSubmit:t,children:[e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"5px"},children:"Password:"}),e.jsx("input",{id:"password",type:"password",value:n,onChange:s=>o(s.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},required:!0})]}),e.jsx("button",{type:"submit",style:{padding:"10px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Login"})]})]})}const Q=()=>{const{count:n,setCount:o}=W(),[r,a]=l.useState("home"),t=()=>e.jsxs("div",{className:"flex-center-col",children:[e.jsx("h1",{children:"hello from bun!"}),e.jsx("img",{src:U,width:250,height:250,alt:"hello from bun!"}),e.jsx("p",{children:"Hot-reloads with persisted state on file save."}),e.jsxs("button",{type:"button",onClick:()=>o(s=>s+1),children:["Count: ",n]}),e.jsx("button",{type:"button",className:"link-btn",onClick:()=>o(0),children:"Reset Count"})]});return e.jsxs("div",{children:[e.jsxs("nav",{style:{padding:"10px",backgroundColor:"#f8f9fa",marginBottom:"20px",display:"flex",gap:"15px"},children:[e.jsx("button",{type:"button",onClick:()=>a("home"),style:{padding:"8px 16px",backgroundColor:r==="home"?"#2196f3":"transparent",color:r==="home"?"white":"black",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Home"}),e.jsx("button",{type:"button",onClick:()=>a("admin"),style:{padding:"8px 16px",backgroundColor:r==="admin"?"#2196f3":"transparent",color:r==="admin"?"white":"black",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Admin"})]}),r==="home"&&t(),r==="admin"&&e.jsx(z,{})]})},T=q("root"),V=e.jsx(l.StrictMode,{children:e.jsx($,{children:e.jsx(E,{client:new R,children:e.jsx(I,{children:e.jsx(Q,{})})})})});A.createRoot(T).render(V);D().catch(console.error);
